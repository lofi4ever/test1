$(function(){$(".switcher__case").on("click",function(){$(".switcher__case").removeClass("active"),$(this).addClass("active")}),$(".hamburger").on("click",function(){$(this).toggleClass("is-active"),$(".bottomline-nav__list").slideToggle(300,function(){"none"==$(this).css("display")&&$(this).removeAttr("style")})});var e=[55.76214,37.62157],r=parseInt($(".form-radiogroup__item.active").find('input[type="radio"]').val(),10),o=18334,t=o+r;$(".status-total .value-set").html(t),$(".form-radiogroup__item").on("click",function(){$(".form-radiogroup__item").removeClass("active"),$(this).addClass("active"),$(".map-switcher").hasClass("active")?$(".map").css("display","block"):$(".map").css("display","none"),r=parseInt($(this).find('input[type="radio"]').val(),10),$(".status-total .value-set").html(t),t=o+r}),ymaps.ready(function(){var r=new ymaps.Map("map",{center:e,zoom:15,controls:[]},{searchControlProvider:"yandex#search"});myPlacemark=new ymaps.Placemark(e,{},{iconImageHref:"../img/location.png",iconImageSize:[64,64],iconImageOffset:[-32,-64]}),r.geoObjects.add(myPlacemark),$("#form-location").on("change",function(){var o=$("#form-location").prop("selectedIndex"),t=$(".map-descr").get(o);$(".map-descr").removeClass("active"),$(t).addClass("active"),e=$("#form-location").val().split(","),myPlacemark.geometry.setCoordinates(e),r.setCenter(e)})}),$(".form-phone").mask("99/999/999"),$(".form input#form-name, .form input#form-lastname, .form input#form-mail, .form input#form-phone, .form input#form-name, .form input#form-city, .form textarea#form-comment").unbind().blur(function(){var e=$(this).attr("id"),r=$(this).val();switch(e){case"form-name":case"form-lastname":case"form-city":var o=/^[a-zA-Zа-яА-Я]+$/;r.length>2&&""!=r&&o.test(r)?($(this).addClass("not_error").css("border-color","green"),$(this).next(".error-box").html("")):($(this).removeClass("not_error").addClass("error").css("border-color","red"),$(this).next(".error-box").html("Поле обязательно для заполнения<br>, длина должна составлять не менее 2 символов<br>, поле должно содержать только русские или латинские буквы"));break;case"form-mail":var t=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/;""!=r&&t.test(r)?($(this).addClass("not_error").css("border-color","green"),$(this).next(".error-box").html("")):($(this).removeClass("not_error").addClass("error").css("border-color","red"),$(this).next(".error-box").html('Поле "Email" обязательно для заполнения<br>, поле должно содержать правильный email-адрес<br>'));case"form-comment":""!=r&&r.length<5e3?($(this).addClass("not_error").css("border-color","green"),$(this).next(".error-box").text("")):($(this).removeClass("not_error").addClass("error").css("border-color","red"),$(this).next(".error-box").html("Поле обязательно для заполнения"))}}),$(".form").submit(function(e){if(e.preventDefault(),console.log($(".not_error").length),5!=$(".not_error").length)return alert("Проверьте правильность заполнения полей"),!1;$.ajax({url:"send.php",type:"post",data:$(this).serialize(),beforeSend:function(e,r){$("form#feedback-form :input").attr("disabled","disabled")},success:function(e){$("form#feedback-form :input").removeAttr("disabled"),$("form#feedback-form :text, textarea").val("").removeClass().next(".error-box").text(""),alert(e)}})}),$("#form-comment").on("keypress",function(){var e=$(this).val(),r=e.indexOf("<"),o=e.indexOf(">");-1!==r&&-1!==o&&$(this).val(e.replace(e.slice(r,o+1),""))})});